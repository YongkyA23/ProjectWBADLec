<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://kit.fontawesome.com/099ac854b2.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="css/style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Playfair"
    />
    <title>Made Good</title>
  </head>
  <body>
    <div class="container">
      <div class="logo-header">
        <img src="/img/MadeGoodLogo.png" alt="" />
      </div>
      <nav class="navbar">
        <div class="search-container">
          <button type="submit" class="search-button">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
          <input type="text" placeholder="Search ..." class="searchBox" />
        </div>
        <div class="navbaritem-container">
          <a href="index.html">Home</a>
          <div class="line"></div>
          <div class="dropdown">
            <a href="">Shop</a>
            <div class="navbaritem-dropdown">
              <a href="">All Products</a>
              <a href="">DIY Gifts</a>
              <a href="">Keychains</a>
              <a href="">Paintings</a>
              <a href="">Toys</a>
              <a href="">Lamp</a>
              <a href="">Bag</a>
            </div>
          </div>
          <div class="line"></div>
          <a href="aboutus.html">About</a>
          <div class="line"></div>
          <a href="contact.html">Contact</a>
        </div>
        <div class="right-navbar">
          <div class="login">
            <i class="fa-solid fa-circle-user"></i>
            <a href="signin.html" id="loginLink">Log In</a>
          </div>
        </div>
      </nav>
    </div>
    <div class="bag">
      <img src="img/duffle bag.jpg" alt="lampu" />'
      <img src="img/duffle bag 2.jpg" alt="lampu" />'
      <div class="productname">Duffle Bag</div>
      <div class="productId">DF001</div>
      <div class="price">Rp.300.000</div>
      <div id="stock-container">
        <p><span id="stock-count"></span></p>
      </div>
      <div class="modelOption">
        <select name="model" id="mpdel-select">
          <option value="">Select Color</option>
          <option value="model1">Beige</option>
          <option value="model2">Red</option>
          <option value="model2">Blue</option>
        </select>
      </div>
      <div class="qty">
        <label for="quantity">Quantity</label>
        <div class="quantity">
          <button class="minus-btn" type="button" name="button" id="minus-btn">
            -
          </button>
          <input
            type="number"
            id="quantity"
            name="quantity"
            min="1"
            max="100"
            value="1"
          />
          <button class="plus-btn" type="button" name="button" id="plus-btn">
            +
          </button>
        </div>
      </div>
      <button id="buyBtn">Buy Now</button>
      <br />
      <br />
      <div class="description">
        <b>Duffle Bag </b><br />
        Bahan : Kain canvas <br />
        Ink : plastinol <br />
        Dimensi : (up to 35 liter) <br />
        Panjang 52cm <br />
        Lebar 25cm <br />
        Tinggi 26cm <br />
      </div>
    </div>
  </body>
  <script>
    const productId = "DF001";
    const products = JSON.parse(localStorage.getItem(productId)) || {
      name: "Duffle Bag",
      id: productId,
      price: 300000,
      models: [
        { name: "beige", price: 0 },
        { name: "red", price: 0 },
        { name: "blue", price: 0 },
      ],
      stock: 5,
    };
    const stockCountElement = document.getElementById("stock-count");
    stockCountElement.textContent = `In stock: ${products.stock}`;

    const buyNowBtn = document.getElementById("buyBtn");
    buyNowBtn.addEventListener("click", () => {
      console.log("Buy now button clicked");
      const qtyInput = document.getElementById("quantity");

      if (qtyInput.value > products.stock) {
        alert("Stock not enough");
      } else {
        products.stock -= qtyInput.value;
        stockCountElement.textContent = `In stock: ${products.stock}`;
        localStorage.setItem(productId, JSON.stringify(products));

        // Redirect to payment.html with price value as query parameter
        const priceValue = products.price * qtyInput.value;
        const paymentUrl = `payment.html?price=${priceValue}`;
        window.location.replace(paymentUrl);
      }
    });
  </script>
  <script src="js/jquery-3.7.0.min.js"></script>
  <script src="js/script.js"></script>
</html>
